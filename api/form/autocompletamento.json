[
    {
        "name": "Base",
        "content": "\n<div class=\"form-group\">\n  <label for=\"accessibleAutocomplete\">Regione</label>\n  <div id=\"accessibleAutocompleteWrapper\" class=\"autocomplete-wrapper\"></div>\n</div>\n<script>\n  document.addEventListener('DOMContentLoaded', function () {\n    const italianRegions = [\"Abruzzo\", \"Basilicata\", \"Calabria\", \"Campania\", \"Emilia Romagna\", \"Friuli Venezia Giulia\", \"Lazio\", \"Liguria\", \"Lombardia\", \"Marche\", \"Molise\", \"Piemonte\", \"Puglia\", \"Sardegna\", \"Sicilia\", \"Toscana\", \"Trentino Alto Adige\", \"Umbria\", \"Valle d\\u2019Aosta\", \"Veneto\"];\n    const selectElement = document.querySelector('#accessibleAutocompleteWrapper');\n    const selectAutocomplete = new bootstrap.SelectAutocomplete(selectElement, {\n      id: 'accessibleAutocomplete',\n      name: 'regioni',\n      source: italianRegions\n    });\n  })\n</script>\n"
    },
    {
        "name": "Cambiare i valori dinamicamente",
        "content": "\n<div class=\"row\">\n  <div class=\"col-12\">\n    <div class=\"form-group\">\n      <div class=\"select-wrapper\">\n        <label for=\"category\">Categoria alimento</label>\n        <select id=\"category\" name=\"category\">\n          <option value=\"frutta\" selected>Frutta</option>\n          <option value=\"verdura\">Verdura</option>\n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-12\">\n    <div class=\"form-group\">\n      <label for=\"productAutocomplete\">Alimento</label>\n      <div id=\"productAutocompleteWrapper\" class=\"autocomplete-wrapper\"></div>\n    </div>\n  </div>\n  <script>\n    const form_data = {\n      'frutta' : [\n        'Mela',\n        'Pera',\n        'Melone',\n        'Banana',\n      ],\n      'verdura' : [\n        'Carota',\n        'Zucchina',\n        'Melanzana',\n        'Carciofo',\n      ],\n    }\n    document.addEventListener('DOMContentLoaded', function () {\n      const categorySelect = document.getElementById(\"category\");\n      const selectWrapperElement = document.getElementById(\"productAutocompleteWrapper\");\n      const selectAutocomplete = new bootstrap.SelectAutocomplete(selectWrapperElement, {\n        id: 'productAutocomplete',\n        name: 'prodotto',\n        source: (query, populateResults) => {\n          const results = form_data[categorySelect.value]\n          const filteredResults = results.filter(\n            result => result.toLowerCase() .indexOf(query.toLowerCase()) !== -1\n          )\n          populateResults(filteredResults)\n        }\n      });\n      // Facoltativo: se si vuole cancellare l'elemento al cambio del filtro\n      categorySelect.addEventListener('change', (event) => {\n        document.getElementById(\"productAutocomplete\").value = '';\n      });\n    })\n  </script>\n</div>\n"
    },
    {
        "name": "Regioni e Comuni",
        "content": "\n<div class=\"row\">\n  <div class=\"col-12\">\n    <div class=\"form-group\">\n      <div class=\"select-wrapper\">\n        <label for=\"regione\">Regione</label>\n        <select id=\"regione\" name=\"regione\">\n          \n          <option value=\"Abruzzo\">Abruzzo</option>\n          \n          <option value=\"Basilicata\">Basilicata</option>\n          \n          <option value=\"Calabria\">Calabria</option>\n          \n          <option value=\"Campania\">Campania</option>\n          \n          <option value=\"Emilia Romagna\">Emilia Romagna</option>\n          \n          <option value=\"Friuli Venezia Giulia\">Friuli Venezia Giulia</option>\n          \n          <option value=\"Lazio\">Lazio</option>\n          \n          <option value=\"Liguria\">Liguria</option>\n          \n          <option value=\"Lombardia\">Lombardia</option>\n          \n          <option value=\"Marche\">Marche</option>\n          \n          <option value=\"Molise\">Molise</option>\n          \n          <option value=\"Piemonte\">Piemonte</option>\n          \n          <option value=\"Puglia\">Puglia</option>\n          \n          <option value=\"Sardegna\">Sardegna</option>\n          \n          <option value=\"Sicilia\">Sicilia</option>\n          \n          <option value=\"Toscana\">Toscana</option>\n          \n          <option value=\"Trentino Alto Adige\">Trentino Alto Adige</option>\n          \n          <option value=\"Umbria\">Umbria</option>\n          \n          <option value=\"Valle d\u2019Aosta\">Valle d\u2019Aosta</option>\n          \n          <option value=\"Veneto\">Veneto</option>\n          \n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-12\">\n    <div class=\"form-group\">\n      <label for=\"comuniAutocomplete\">Comune</label>\n      <div id=\"comuniAutocompleteWrapper\" class=\"autocomplete-wrapper\"></div>\n    </div>\n  </div>\n  <script>\n    document.addEventListener('DOMContentLoaded', async function () {\n      const italianRegions = [\"Abruzzo\", \"Basilicata\", \"Calabria\", \"Campania\", \"Emilia Romagna\", \"Friuli Venezia Giulia\", \"Lazio\", \"Liguria\", \"Lombardia\", \"Marche\", \"Molise\", \"Piemonte\", \"Puglia\", \"Sardegna\", \"Sicilia\", \"Toscana\", \"Trentino Alto Adige\", \"Umbria\", \"Valle d\\u2019Aosta\", \"Veneto\"];\n      const data = {}\n      italianRegions.forEach(region => { data[region] = [] })\n      const comuniJson = await (await fetch('https://italia.github.io/bootstrap-italia/docs/esempi/form/comuni.json')).json();\n      comuniJson.forEach(comune => data[comune.regione].push(comune.comune))\n      const regioniSelect = document.getElementById(\"regione\");\n      const selectWrapperElement = document.getElementById(\"comuniAutocompleteWrapper\");\n      const selectAutocomplete = new bootstrap.SelectAutocomplete(selectWrapperElement, {\n        id: 'comuniAutocomplete',\n        name: 'comuni',\n        source: (query, populateResults) => {\n          const results = data[regioniSelect.value]\n          const filteredResults = results.filter(\n            result => result.toLowerCase() .indexOf(query.toLowerCase()) !== -1\n          )          \n          populateResults(filteredResults)\n        }\n      });\n      regioniSelect.addEventListener('change', (event) => {\n        document.getElementById(\"comuniAutocomplete\").value = '';\n      });\n    })\n  </script>\n</div>\n"
    },
    {
        "name": "Validazione",
        "content": "\n<div>\n  <form id=\"justValidate\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"form-group\">\n          <label for=\"comuneJVAutocomplete\">Comune di residenza</label>\n          <div id=\"comuneJVAutocompleteWrapper\" class=\"autocomplete-wrapper\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <button class=\"btn btn-primary mt-3\" type=\"submit\" id=\"submitform\">Invia form</button>\n      </div>\n    </div>\n  </form>\n  <script>\n    document.addEventListener('DOMContentLoaded', async function () {\n      const validate = new bootstrap.FormValidate('#justValidate', {\n        errorFieldCssClass: 'is-invalid',\n        errorLabelCssClass: 'form-feedback',\n        errorLabelStyle: '',\n        focusInvalidField: false,\n      })\n      const comuniJson = await (await fetch('https://italia.github.io/bootstrap-italia/docs/esempi/form/comuni.json')).json();\n      const comuni = comuniJson.map(comune => comune.comune)\n      const selectAutocompleteWrapper = document.querySelector('#comuneJVAutocompleteWrapper');\n      const selectAutocomplete = new bootstrap.SelectAutocomplete(selectAutocompleteWrapper, {\n        source: comuni,\n        id: 'comuneJVAutocomplete',\n        name: 'comuni',\n        minLength: 3,\n        onConfirm: () => {\n          if (!validate.isSubmitted && !validate.validateBeforeSubmitting)\n            return\n          validate.revalidateField('#comuneJVAutocomplete')\n        }\n      });\n      validate\n        .addField('#comuneJVAutocomplete', [\n          {\n            rule: 'required',\n            errorMessage: 'Questo campo \u00e8 richiesto',\n          },\n          {\n            validator: (value) => {\n              return comuni.includes(value);\n            },\n            errorMessage: 'Scegli una citt\u00e0 valida',\n          },\n        ])\n        .onSuccess((event) => {\n          // Inserire qua l'azione nel caso di input valido, ad es.\n          // document.forms['justValidate'].submit()\n        })\n      })\n  </script>\n</div>\n"
    }
]