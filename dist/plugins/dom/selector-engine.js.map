{"version":3,"file":"selector-engine.js","sources":["../../../src/js/plugins/dom/selector-engine.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Italia (https://italia.github.io/bootstrap-italia/)\n * Authors: https://github.com/italia/bootstrap-italia/blob/main/AUTHORS\n * Licensed under BSD-3-Clause license (https://github.com/italia/bootstrap-italia/blob/main/LICENSE)\n * This a fork of Bootstrap: Initial license and original file name below\n * Bootstrap (v5.2.3): dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isDisabled, isVisible } from '../util/index'\n\n/**\n * Constants\n */\n\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector))\n  },\n\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector)\n  },\n\n  children(element, selector) {\n    return [].concat(...element.children).filter((child) => child.matches(selector))\n  },\n\n  parents(element, selector) {\n    const parents = []\n    let ancestor = element.parentNode.closest(selector)\n\n    while (ancestor) {\n      parents.push(ancestor)\n      ancestor = ancestor.parentNode.closest(selector)\n    }\n\n    return parents\n  },\n\n  prev(element, selector) {\n    let previous = element.previousElementSibling\n\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous]\n      }\n\n      previous = previous.previousElementSibling\n    }\n\n    return []\n  },\n  // TODO: this is now unused; remove later along with prev()\n  next(element, selector) {\n    let next = element.nextElementSibling\n\n    while (next) {\n      if (next.matches(selector)) {\n        return [next]\n      }\n\n      next = next.nextElementSibling\n    }\n\n    return []\n  },\n\n  focusableChildren(element) {\n    const focusables = ['a', 'button', 'input', 'textarea', 'select', 'details', '[tabindex]', '[contenteditable=\"true\"]']\n      .map((selector) => `${selector}:not([tabindex^=\"-\"])`)\n      .join(',')\n\n    return this.find(focusables, element).filter((el) => !isDisabled(el) && isVisible(el))\n  },\n}\n\nexport default SelectorEngine\n"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAIA;AACA;AACA;;AAEK,MAAC,cAAc,GAAG;AACvB,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,GAAG,QAAQ,CAAC,eAAe,EAAE;AACrD,IAAI,OAAO,EAAE,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC;AAClF,GAAG;;AAEH,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,GAAG,QAAQ,CAAC,eAAe,EAAE;AACxD,IAAI,OAAO,OAAO,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ;AACjE,GAAG;;AAEH,EAAE,QAAQ,CAAC,OAAO,EAAE,QAAQ,EAAE;AAC9B,IAAI,OAAO,EAAE,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;AACnF,GAAG;;AAEH,EAAE,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE;AAC7B,IAAI,MAAM,OAAO,GAAG;AACpB,IAAI,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ;;AAEtD,IAAI,OAAO,QAAQ,EAAE;AACrB,MAAM,OAAO,CAAC,IAAI,CAAC,QAAQ;AAC3B,MAAM,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ;AACrD;;AAEA,IAAI,OAAO;AACX,GAAG;;AAEH,EAAE,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE;AAC1B,IAAI,IAAI,QAAQ,GAAG,OAAO,CAAC;;AAE3B,IAAI,OAAO,QAAQ,EAAE;AACrB,MAAM,IAAI,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AACtC,QAAQ,OAAO,CAAC,QAAQ;AACxB;;AAEA,MAAM,QAAQ,GAAG,QAAQ,CAAC;AAC1B;;AAEA,IAAI,OAAO;AACX,GAAG;AACH;AACA,EAAE,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE;AAC1B,IAAI,IAAI,IAAI,GAAG,OAAO,CAAC;;AAEvB,IAAI,OAAO,IAAI,EAAE;AACjB,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,QAAQ,OAAO,CAAC,IAAI;AACpB;;AAEA,MAAM,IAAI,GAAG,IAAI,CAAC;AAClB;;AAEA,IAAI,OAAO;AACX,GAAG;;AAEH,EAAE,iBAAiB,CAAC,OAAO,EAAE;AAC7B,IAAI,MAAM,UAAU,GAAG,CAAC,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,0BAA0B;AACzH,OAAO,GAAG,CAAC,CAAC,QAAQ,KAAK,CAAC,EAAE,QAAQ,CAAC,qBAAqB,CAAC;AAC3D,OAAO,IAAI,CAAC,GAAG;;AAEf,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,SAAS,CAAC,EAAE,CAAC;AACzF,GAAG;AACH;;;;"}