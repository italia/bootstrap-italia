{"version":3,"file":"input-password.js","sources":["../../src/js/plugins/input-password.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Italia (https://italia.github.io/bootstrap-italia/)\n * Authors: https://github.com/italia/bootstrap-italia/blob/main/AUTHORS\n * Licensed under BSD-3-Clause license (https://github.com/italia/bootstrap-italia/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport Manipulator from './dom/manipulator'\n\nimport InputLabel from './input-label'\n\nconst NAME = 'inputpassword'\nconst DATA_KEY = 'bs.inputpassword'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  shortPass: 'Password troppo breve',\n  badPass: 'Password debole.',\n  goodPass: 'Password abbastanza sicura.',\n  strongPass: 'Password sicura.',\n  minimumLength: 8,\n  suggestionsLabel: 'Suggerimenti per una buona password:',\n  suggestionFollowed: 'suggerimenti seguito',\n  suggestionFollowedPlural: 'suggerimenti seguiti',\n  suggestionOf: 'di',\n  suggestionMetLabel: 'Soddisfatto: ',\n  suggestionMetIconPath: `\n    M9.6 16.9 4 11.4l.8-.7 4.8 4.8 8.5-8.4.7.7-9.2 9.1z\n  `,\n  suggestionLength: 'Almeno {minLength} caratteri.',\n  suggestionUppercase: 'Una o pi첫 maiuscole.',\n  suggestionLowercase: 'Una o pi첫 minuscole.',\n  suggestionNumber: 'Uno o pi첫 numeri.',\n  suggestionSpecial: 'Uno o pi첫 caratteri speciali.',\n}\n\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\nconst EVENT_SCORE = `score${EVENT_KEY}`\nconst EVENT_TEXT = `text${EVENT_KEY}`\nconst EVENT_SUGGS = `suggs${EVENT_KEY}`\n\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_MOUSEDOWN_DATA_API = `mousedown${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_PASSWORD = 'input-password'\n\nconst SELECTOR_PASSWORD = 'input[data-bs-input][type=\"password\"]'\nconst SELECTOR_BTN_SHOW_PWD = '.password-icon'\nconst SELECTOR_METER = '.password-strength-meter'\nconst SELECTOR_METER_GRAYBAR = '.password-meter'\nconst SELECTOR_METER_COLBAR = '.progress-bar'\nconst SELECTOR_METER_TEXT = '.strength-meter-info'\nconst SELECTOR_METER_SUGGS = '.strenght-meter-suggestions'\n\nclass InputPassword extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._isCustom = this._element.classList.contains(CLASS_NAME_PASSWORD)\n    this._meter = this._element.parentNode.querySelector(SELECTOR_METER)\n\n    this._grayBarElement = null\n    this._colorBarElement = null\n    this._textElement = null\n    this._suggsElement = null\n    this._showPwdElement = null\n\n    this._text = {}\n\n    this._label = new InputLabel(element)\n\n    this._suggestions = [\n      {\n        key: 'length',\n        text: (config) => config.suggestionLength.replace('{minLength}', config.minimumLength.toString()),\n        test: (password, config) => password.length >= config.minimumLength,\n      },\n      {\n        key: 'uppercase',\n        text: (config) => config.suggestionUppercase,\n        test: (password) => /[A-Z]/.test(password),\n      },\n      {\n        key: 'lowercase',\n        text: (config) => config.suggestionLowercase,\n        test: (password) => /[a-z]/.test(password),\n      },\n      {\n        key: 'number',\n        text: (config) => config.suggestionNumber,\n        test: (password) => /[0-9]/.test(password),\n      },\n      {\n        key: 'special',\n        text: (config) => config.suggestionSpecial,\n        test: (password) => /[^A-Za-z0-9]/.test(password),\n      },\n    ]\n\n    this._init()\n    this._bindEvents()\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Private\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {}),\n    }\n    return config\n  }\n\n  _init() {\n    if (this._isCustom) {\n      this._handleAutofill()\n      this._showPwdElement = SelectorEngine.findOne(SELECTOR_BTN_SHOW_PWD, this._element.parentNode)\n      if (this._meter) {\n        this._grayBarElement = this._meter.querySelector(SELECTOR_METER_GRAYBAR)\n        this._colorBarElement = this._meter.querySelector(SELECTOR_METER_COLBAR)\n        this._textElement = this._meter.querySelector(SELECTOR_METER_TEXT)\n        this._suggsElement = this._meter.querySelector(SELECTOR_METER_SUGGS)\n        if (this._textElement) {\n          this._config = Object.assign({}, this._config, { ...Manipulator.getDataAttributes(this._textElement) })\n        }\n        if (this._suggsElement) {\n          this._createsuggestionsList()\n        }\n      }\n    }\n  }\n\n  _bindEvents() {\n    if (this._isCustom) {\n      if (this._showPwdElement) {\n        EventHandler.on(this._showPwdElement, EVENT_CLICK, () => this._toggleShowPassword())\n      }\n      if (this._meter) {\n        EventHandler.on(this._element, EVENT_KEYUP, () => this._checkPassword())\n        EventHandler.on(this._element, 'input', () => this._checkPassword())\n      }\n    }\n  }\n\n  _handleAutofill() {\n    const checkAndActivate = () => {\n      if (this._element.value !== '') {\n        this._label._labelOut()\n        this._checkPassword()\n      }\n    }\n    checkAndActivate()\n    setTimeout(checkAndActivate, 100)\n    EventHandler.on(this._element, 'animationstart', (event) => {\n      if (event.animationName === 'onAutoFillStart') {\n        checkAndActivate()\n      }\n    })\n  }\n\n  _toggleShowPassword() {\n    const toShow = this._element.getAttribute('type') === 'password'\n    SelectorEngine.find('[class^=\"password-icon\"]', this._showPwdElement).forEach((icon) => icon.classList.toggle('d-none'))\n    this._element.setAttribute('type', toShow ? 'text' : 'password')\n    this._showPwdElement.setAttribute('aria-checked', toShow.toString())\n  }\n\n  _checkPassword() {\n    const password = this._element.value\n    const score = this._calculateScore(password)\n    this._updateMeter(score)\n    this._updateText(score, password)\n    this._updateSuggestions(password)\n  }\n\n  _updateMeter(score) {\n    const perc = score < 0 ? 0 : score\n    if (this._colorBarElement) {\n      this._colorBarElement.classList.forEach((className) => {\n        if (className.match(/(^|\\s)bg-\\S+/g)) {\n          this._colorBarElement.classList.remove(className)\n        }\n      })\n      this._colorBarElement.classList.add(`bg-${this._scoreColor(score)}`)\n      this._colorBarElement.style.width = `${perc}%`\n      this._colorBarElement.setAttribute('aria-valuenow', perc)\n    }\n    EventHandler.trigger(this._element, EVENT_SCORE)\n  }\n\n  _updateText(score, password) {\n    if (this._textElement) {\n      let text = this._scoreText(score)\n      if (this._suggsElement) {\n        const { completedCount, totalCount } = this._getCompletedSuggestions(password)\n        const suggestionText = completedCount === 1 ? this._config.suggestionFollowed : this._config.suggestionFollowedPlural\n        text += ` ${completedCount} ${this._config.suggestionOf} ${totalCount} ${suggestionText}.`\n      }\n      if (this._textElement.textContent !== text) {\n        this._textElement.textContent = text\n        this._textElement.classList.forEach((className) => {\n          if (className.match(/(^|\\s)text-\\S+/g)) {\n            this._textElement.classList.remove(className)\n          }\n        })\n        this._textElement.classList.add(`text-${this._scoreColor(score)}`)\n        EventHandler.trigger(this._element, EVENT_TEXT)\n      }\n    }\n  }\n\n  _updateSuggestions(password) {\n    if (this._suggsElement) {\n      this._updateSuggestionsList(password)\n      EventHandler.trigger(this._element, EVENT_SUGGS)\n    }\n  }\n\n  _getCompletedSuggestions(password) {\n    let completedCount = 0\n    const totalCount = this._suggestions.length\n    this._suggestions.forEach((sugg) => {\n      if (sugg.test(password, this._config)) completedCount++\n    })\n    return { completedCount, totalCount }\n  }\n\n  _createsuggestionsList() {\n    if (this._suggsElement.querySelector('.password-suggestions')) {\n      return\n    }\n    const suggLabel = document.createElement('label')\n    suggLabel.className = 'visually-hidden'\n    suggLabel.htmlFor = 'suggestions'\n    suggLabel.textContent = Default.suggestionsLabel\n    const suggContainer = document.createElement('div')\n    suggContainer.id = 'suggestions'\n    suggContainer.className = 'password-suggestions'\n\n    this._suggestions.forEach((sugg) => {\n      const suggElement = document.createElement('div')\n      suggElement.className = 'suggestion'\n      suggElement.dataset.suggestion = sugg.key\n      const checkIcon = this._createIconCheck()\n      const textSpan = document.createElement('span')\n      textSpan.textContent = sugg.text(this._config)\n      suggElement.appendChild(checkIcon)\n      suggElement.appendChild(textSpan)\n      suggContainer.appendChild(suggElement)\n    })\n\n    this._suggsElement.appendChild(suggLabel)\n    this._suggsElement.appendChild(suggContainer)\n  }\n\n  _createIconCheck() {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    svg.setAttribute('class', `icon icon-xs me-1 d-none`)\n    svg.setAttribute('aria-label', this._config.suggestionMetLabel)\n    svg.setAttribute('viewBox', '0 0 24 24')\n    svg.style.width = '1em'\n    svg.style.height = '1em'\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('d', this._config.suggestionMetIconPath.trim())\n    svg.appendChild(path)\n    return svg\n  }\n\n  _updateSuggestionsList(password) {\n    if (!this._suggsElement) return\n    this._suggestions.forEach((sugg) => {\n      const suggElement = this._suggsElement.querySelector(`[data-suggestion=\"${sugg.key}\"]`)\n      if (suggElement) {\n        const isMet = sugg.test(password, this._config)\n        const checkIcon = suggElement.querySelector('.icon')\n        if (checkIcon) {\n          checkIcon.classList.toggle('d-none', !isMet)\n        }\n      }\n    })\n  }\n\n  /**\n   * Returns strings based on the score given.\n   *\n   * @param int score Score base.\n   * @return string\n   */\n  _scoreText(score) {\n    if (score === -1) {\n      return this._config.shortPass\n    }\n\n    if (score === -2) {\n      return ''\n    }\n\n    score = score < 0 ? 0 : score\n\n    if (score < 26) {\n      return this._config.badPass\n    }\n    if (score < 51) {\n      return this._config.badPass\n    }\n    if (score < 76) {\n      return this._config.goodPass\n    }\n\n    return this._config.strongPass\n  }\n\n  _scoreColor(score) {\n    if (score === -1 || score === -2 || score < 26) {\n      return 'danger'\n    }\n    if (score < 51) {\n      return 'warning'\n    }\n    if (score < 76) {\n      return 'success'\n    }\n    return 'success'\n  }\n\n  /**\n   * Returns a value between -1 and 100 to score\n   * the user's password.\n   *\n   * @param  string password The password to be checked.\n   * @return int\n   */\n  _calculateScore(password) {\n    var score = 0\n\n    // empty password\n    if (password.trim().length === 0) {\n      return -2\n    }\n\n    // password < this._config.minimumLength\n    if (password.length < this._config.minimumLength) {\n      return -1\n    }\n\n    // password length\n    score += password.length * 4\n    score += this._checkRepetition(1, password).length - password.length\n    score += this._checkRepetition(2, password).length - password.length\n    score += this._checkRepetition(3, password).length - password.length\n    score += this._checkRepetition(4, password).length - password.length\n\n    // password has 3 numbers\n    if (password.match(/(.*[0-9].*[0-9].*[0-9])/)) {\n      score += 5\n    }\n\n    // password has at least 2 symbols\n    var symbols = '.*[!,@,#,$,%,^,&,*,?,_,~]'\n    symbols = new RegExp('(' + symbols + symbols + ')')\n    if (password.match(symbols)) {\n      score += 5\n    }\n\n    // password has Upper and Lower chars\n    if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) {\n      score += 10\n    }\n\n    // password has number and chars\n    if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)) {\n      score += 15\n    }\n\n    // password has number and symbol\n    if (password.match(/([!,@,#,$,%,^,&,*,?,_,~])/) && password.match(/([0-9])/)) {\n      score += 15\n    }\n\n    // password has char and symbol\n    if (password.match(/([!,@,#,$,%,^,&,*,?,_,~])/) && password.match(/([a-zA-Z])/)) {\n      score += 15\n    }\n\n    // password is just numbers or chars\n    if (password.match(/^\\w+$/) || password.match(/^\\d+$/)) {\n      score -= 10\n    }\n\n    if (score > 100) {\n      score = 100\n    }\n\n    if (score < 0) {\n      score = 0\n    }\n\n    return score\n  }\n\n  /**\n   * Checks for repetition of characters in\n   * a string\n   *\n   * @param int rLen Repetition length.\n   * @param string str The string to be checked.\n   * @return string\n   */\n  _checkRepetition(rLen, str) {\n    var res = '',\n      repeated = false\n    for (var i = 0; i < str.length; i++) {\n      repeated = true\n      for (var j = 0; j < rLen && j + i + rLen < str.length; j++) {\n        repeated = repeated && str.charAt(j + i) === str.charAt(j + i + rLen)\n      }\n      if (j < rLen) {\n        repeated = false\n      }\n      if (repeated) {\n        i += rLen - 1\n        repeated = false\n      } else {\n        res += str.charAt(i)\n      }\n    }\n    return res\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  const createInput = (element) => {\n    if (element && element.matches(SELECTOR_PASSWORD)) {\n      return InputPassword.getOrCreateInstance(element)\n    }\n    return null\n  }\n\n  const initInputPassword = () => {\n    const element = SelectorEngine.findOne(SELECTOR_PASSWORD)\n    if (element) {\n      InputPassword.getOrCreateInstance(element)\n    }\n  }\n\n  if (document.readyState !== 'loading') {\n    initInputPassword()\n  } else {\n    document.addEventListener('DOMContentLoaded', initInputPassword)\n  }\n\n  EventHandler.on(document, EVENT_MOUSEDOWN_DATA_API, SELECTOR_PASSWORD + ', label', function () {\n    const target = InputLabel.getInputFromLabel(this) || this\n    createInput(target)\n  })\n  EventHandler.on(document, EVENT_KEYUP_DATA_API, SELECTOR_PASSWORD + ', label', function () {\n    const target = InputLabel.getInputFromLabel(this) || this\n    const element = createInput(target)\n    if (element && element._label) {\n      element._label._labelOut()\n    }\n  })\n  EventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_BTN_SHOW_PWD, function () {\n    const target = this.parentNode && this.parentNode.querySelector(SELECTOR_PASSWORD)\n    if (target) {\n      InputPassword.getOrCreateInstance(target)\n    }\n  })\n}\n\nexport default InputPassword\n"],"names":[],"mappings":"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"}