{"version":3,"file":"back-to-top.js","sources":["../../src/js/plugins/back-to-top.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Italia (https://italia.github.io/bootstrap-italia/)\n * Authors: https://github.com/italia/bootstrap-italia/blob/main/AUTHORS\n * Licensed under BSD-3-Clause license (https://github.com/italia/bootstrap-italia/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\n\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport Manipulator from './dom/manipulator'\n\nimport onDocumentScroll from './util/on-document-scroll'\nimport { documentScrollTo } from './util/tween'\n\nconst NAME = 'backtotop'\nconst DATA_KEY = 'bs.backtotop'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLICK = `click${EVENT_KEY}`\n\nconst CLASS_NAME_SHOW = 'back-to-top-show'\n\nconst SELECTOR_TOGGLE = '[data-bs-toggle=\"backtotop\"]'\n\nconst Default = {\n  positionTop: 0,\n  scrollLimit: 100,\n  duration: 800,\n  easing: 'easeInOutSine',\n}\n\nclass BackToTop extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._scrollCb = null\n    this._isAnim = false\n    this._prevScrollBehavior = ''\n\n    this._bindEvents()\n  }\n\n  // Getters\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() {\n    if (!this._element.classList.contains(CLASS_NAME_SHOW)) {\n      this._element.classList.add(CLASS_NAME_SHOW)\n    }\n  }\n\n  hide() {\n    if (this._element.classList.contains(CLASS_NAME_SHOW)) {\n      this._element.classList.remove(CLASS_NAME_SHOW)\n    }\n  }\n\n  toggleShow() {\n    if (typeof document !== 'undefined' && document.scrollingElement.scrollTop > this._config.scrollLimit) {\n      this.show()\n    } else {\n      this.hide()\n    }\n  }\n\n  scrollToTop() {\n    if (!this._isAnim) {\n      this._isAnim = true\n      documentScrollTo(this._config.positionTop, {\n        duration: this._config.duration,\n        easing: this._config.easing,\n        complete: () => {\n          this._isAnim = false\n        },\n      })\n    }\n  }\n\n  dispose() {\n    if (this._scrollCb) {\n      this._scrollCb.dispose()\n    }\n\n    super.dispose()\n  }\n\n  // Private\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {}),\n    }\n    return config\n  }\n\n  _bindEvents() {\n    this._scrollCb = onDocumentScroll(() => this.toggleShow())\n\n    EventHandler.on(this._element, EVENT_CLICK, (evt) => {\n      evt.preventDefault()\n      this.scrollToTop()\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nonDocumentScroll(() => {\n  const toggles = SelectorEngine.find(SELECTOR_TOGGLE)\n  toggles.map((toggle) => {\n    BackToTop.getOrCreateInstance(toggle)\n  })\n})\n\nexport default BackToTop\n"],"names":[],"mappings":"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"}