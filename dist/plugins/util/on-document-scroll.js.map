{"version":3,"file":"on-document-scroll.js","sources":["../../../src/js/plugins/util/on-document-scroll.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Italia (https://italia.github.io/bootstrap-italia/)\n * Authors: https://github.com/italia/bootstrap-italia/blob/main/AUTHORS\n * Licensed under BSD-3-Clause license (https://github.com/italia/bootstrap-italia/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { v4 as uuidv4 } from 'uuid'\n\nlet ticking = false\nlet callbacks = []\n\nclass ScrollCallback {\n  constructor(id, callback) {\n    this.id = id\n    this._callback = callback\n  }\n\n  //Public\n  dispose() {\n    removeCallBack(this.id)\n  }\n\n  //Private\n  _execute(data) {\n    this._callback(data)\n  }\n}\n\nconst removeCallBack = (id) => {\n  callbacks = callbacks.filter((cb) => cb.id !== id)\n}\n\nconst onDocumentScroll = (callback) => {\n  if (typeof document === 'undefined') {\n    return\n  }\n  if (!callbacks.length) {\n    if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n      document.addEventListener('scroll', (evt) => {\n        if (!ticking) {\n          window.requestAnimationFrame(() => {\n            callbacks.forEach((cbObj) => cbObj.cb._execute(evt))\n            ticking = false\n          })\n          ticking = true\n        }\n      })\n    }\n  }\n\n  if (typeof callback === 'function') {\n    const newCb = new ScrollCallback(uuidv4(), callback)\n    callbacks.push({\n      id: newCb.id,\n      cb: newCb,\n    })\n    return newCb\n  }\n\n  console.error('[onDocumentScroll] the provided data has to be of type function')\n  return null\n}\n\nexport default onDocumentScroll\n"],"names":["uuidv4"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAIA,IAAI,OAAO,GAAG;AACd,IAAI,SAAS,GAAG;;AAEhB,MAAM,cAAc,CAAC;AACrB,EAAE,WAAW,CAAC,EAAE,EAAE,QAAQ,EAAE;AAC5B,IAAI,IAAI,CAAC,EAAE,GAAG;AACd,IAAI,IAAI,CAAC,SAAS,GAAG;AACrB;;AAEA;AACA,EAAE,OAAO,GAAG;AACZ,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE;AAC1B;;AAEA;AACA,EAAE,QAAQ,CAAC,IAAI,EAAE;AACjB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI;AACvB;AACA;;AAEA,MAAM,cAAc,GAAG,CAAC,EAAE,KAAK;AAC/B,EAAE,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;AACnD;;AAEK,MAAC,gBAAgB,GAAG,CAAC,QAAQ,KAAK;AACvC,EAAE,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;AACvC,IAAI;AACJ;AACA,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AACzB,IAAI,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;AAC1E,MAAM,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,GAAG,KAAK;AACnD,QAAQ,IAAI,CAAC,OAAO,EAAE;AACtB,UAAU,MAAM,CAAC,qBAAqB,CAAC,MAAM;AAC7C,YAAY,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC/D,YAAY,OAAO,GAAG;AACtB,WAAW;AACX,UAAU,OAAO,GAAG;AACpB;AACA,OAAO;AACP;AACA;;AAEA,EAAE,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;AACtC,IAAI,MAAM,KAAK,GAAG,IAAI,cAAc,CAACA,EAAM,EAAE,EAAE,QAAQ;AACvD,IAAI,SAAS,CAAC,IAAI,CAAC;AACnB,MAAM,EAAE,EAAE,KAAK,CAAC,EAAE;AAClB,MAAM,EAAE,EAAE,KAAK;AACf,KAAK;AACL,IAAI,OAAO;AACX;;AAEA,EAAE,OAAO,CAAC,KAAK,CAAC,iEAAiE;AACjF,EAAE,OAAO;AACT;;;;"}