{"version":3,"file":"on-document-scroll.js","sources":["../../../src/js/plugins/util/on-document-scroll.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid'\n\nlet ticking = false\nlet callbacks = []\n\nclass ScrollCallback {\n  constructor(id, callback) {\n    this.id = id\n    this._callback = callback\n  }\n\n  //Public\n  dispose() {\n    removeCallBack(this.id)\n  }\n\n  //Private\n  _execute(data) {\n    this._callback(data)\n  }\n}\n\nconst removeCallBack = (id) => {\n  callbacks = callbacks.filter((cb) => cb.id !== id)\n}\n\nconst onDocumentScroll = (callback) => {\n  if (!callbacks.length) {\n    document.addEventListener('scroll', (evt) => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          callbacks.forEach((cbObj) => cbObj.cb._execute(evt))\n          ticking = false\n        })\n        ticking = true\n      }\n    })\n  }\n\n  if (typeof callback === 'function') {\n    const newCb = new ScrollCallback(uuidv4(), callback)\n    callbacks.push({\n      id: newCb.id,\n      cb: newCb,\n    })\n    return newCb\n  }\n\n  console.error('[onDocumentScroll] the provided data has to be of type function')\n  return null\n}\n\nexport default onDocumentScroll\n"],"names":["uuidv4"],"mappings":";;AAEA,IAAI,OAAO,GAAG,MAAK;AACnB,IAAI,SAAS,GAAG,GAAE;AAClB;AACA,MAAM,cAAc,CAAC;AACrB,EAAE,WAAW,CAAC,EAAE,EAAE,QAAQ,EAAE;AAC5B,IAAI,IAAI,CAAC,EAAE,GAAG,GAAE;AAChB,IAAI,IAAI,CAAC,SAAS,GAAG,SAAQ;AAC7B,GAAG;AACH;AACA;AACA,EAAE,OAAO,GAAG;AACZ,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,EAAC;AAC3B,GAAG;AACH;AACA;AACA,EAAE,QAAQ,CAAC,IAAI,EAAE;AACjB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAC;AACxB,GAAG;AACH,CAAC;AACD;AACA,MAAM,cAAc,GAAG,CAAC,EAAE,KAAK;AAC/B,EAAE,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAC;AACpD,EAAC;AACD;AACK,MAAC,gBAAgB,GAAG,CAAC,QAAQ,KAAK;AACvC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AACzB,IAAI,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,GAAG,KAAK;AACjD,MAAM,IAAI,CAAC,OAAO,EAAE;AACpB,QAAQ,MAAM,CAAC,qBAAqB,CAAC,MAAM;AAC3C,UAAU,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAC;AAC9D,UAAU,OAAO,GAAG,MAAK;AACzB,SAAS,EAAC;AACV,QAAQ,OAAO,GAAG,KAAI;AACtB,OAAO;AACP,KAAK,EAAC;AACN,GAAG;AACH;AACA,EAAE,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;AACtC,IAAI,MAAM,KAAK,GAAG,IAAI,cAAc,CAACA,EAAM,EAAE,EAAE,QAAQ,EAAC;AACxD,IAAI,SAAS,CAAC,IAAI,CAAC;AACnB,MAAM,EAAE,EAAE,KAAK,CAAC,EAAE;AAClB,MAAM,EAAE,EAAE,KAAK;AACf,KAAK,EAAC;AACN,IAAI,OAAO,KAAK;AAChB,GAAG;AACH;AACA,EAAE,OAAO,CAAC,KAAK,CAAC,iEAAiE,EAAC;AAClF,EAAE,OAAO,IAAI;AACb;;;;"}