{"version":3,"file":"videoplayer.js","sources":["../../src/js/plugins/videoplayer.js"],"sourcesContent":["import BaseComponent from 'bootstrap/js/src/base-component.js'\n\nimport SelectorEngine from 'bootstrap/js/src/dom/selector-engine'\nimport Manipulator from 'bootstrap/js/src/dom/manipulator'\nimport videojs from 'video.js'\nimport { initYoutubePlugin } from './util/youtube-video'\n\nconst NAME = 'videoplayer'\n\nconst SELECTOR_TOGGLE = '[data-bs-video]'\n\nconst itLang = {\n  'Audio Player': 'Lettore audio',\n  'Video Player': 'Lettore video',\n  Play: 'Play',\n  Pause: 'Pausa',\n  Replay: 'Replay',\n  'Current Time': 'Orario attuale',\n  Duration: 'Durata',\n  'Remaining Time': 'Tempo rimanente',\n  'Stream Type': 'Tipo di streaming',\n  LIVE: 'LIVE',\n  Loaded: 'Caricato',\n  Progress: 'Stato',\n  'Progress Bar': 'Barra di avanzamento',\n  'progress bar timing: currentTime={1} duration={2}': '{1} di {2}',\n  Fullscreen: 'Schermo intero',\n  'Exit Fullscreen': 'Chiudi Schermo intero',\n  Mute: 'Disattiva l’audio',\n  Unmute: 'Attiva l’audio',\n  'Playback Rate': 'Velocità di riproduzione',\n  Subtitles: 'Sottotitoli',\n  'subtitles off': 'Senza sottotitoli',\n  Captions: 'Sottotitoli non udenti',\n  'captions off': 'Senza sottotitoli non udenti',\n  Chapters: 'Capitolo',\n  Descriptions: 'Descrizioni',\n  'descriptions off': 'Descrizioni disattivate',\n  'Audio Track': 'Traccia audio',\n  'Volume Level': 'Livello del volume',\n  'You aborted the media playback': 'La riproduzione del filmato è stata interrotta.',\n  'A network error caused the media download to fail part-way.': 'Il download del filmato è stato interrotto a causa di un problema rete.',\n  'The media could not be loaded, either because the server or network failed or because the format is not supported.':\n    'Il filmato non può essere caricato a causa di un errore nel server o nella rete o perché il formato non viene supportato.',\n  'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.':\n    'La riproduzione del filmato è stata interrotta a causa di un file danneggiato o per l’utilizzo di impostazioni non supportate dal browser.',\n  'No compatible source was found for this media.': 'Non ci sono fonti compatibili per questo filmato.',\n  'The media is encrypted and we do not have the keys to decrypt it.': 'Il contenuto multimediale è criptato e non disponiamo delle chiavi per decifrarlo.',\n  'Play Video': 'Riproduci il video',\n  Close: 'Chiudi',\n  'Close Modal Dialog': 'Chiudi la finestra di dialogo',\n  'Modal Window': 'Finestra di dialogo',\n  'This is a modal window': 'Questa è una finestra di dialogo',\n  'This modal can be closed by pressing the Escape key or activating the close button.':\n    'Questa finestra di dialogo può essere chiusa premendo sul tasto Esc o attivando il pulsante di chiusura.',\n  ', opens captions settings dialog': ', aprire i parametri della trascrizione dei sottotitoli',\n  ', opens subtitles settings dialog': ', aprire i parametri dei sottotitoli',\n  ', opens descriptions settings dialog': ', aprire i parametri delle descrizioni',\n  ', selected': ', selezionato',\n  'captions settings': 'Parametri sottotitoli non udenti',\n  'subtitles settings': 'Parametri sottotitoli',\n  'descriptions settings': 'Parametri descrizioni',\n  Text: 'Testo',\n  White: 'Bianco',\n  Black: 'Nero',\n  Red: 'Rosso',\n  Green: 'Verde',\n  Blue: 'Blu',\n  Yellow: 'Giallo',\n  Magenta: 'Magenta',\n  Cyan: 'Ciano',\n  Background: 'Sfondo',\n  Window: 'Finestra',\n  Transparent: 'Trasparente',\n  'Semi-Transparent': 'Semi-Trasparente',\n  Opaque: 'Opaco',\n  'Font Size': 'Dimensione dei caratteri',\n  'Text Edge Style': 'Stile dei bordi del testo',\n  None: 'Nessuno',\n  Uniform: 'Uniforme',\n  'Drop shadow': 'Ombra',\n  'Font Family': 'Carattere',\n  'Proportional Sans-Serif': 'Sans-Serif proporzionale',\n  'Monospace Sans-Serif': 'Sans-Serif monospaziato',\n  'Proportional Serif': 'Serif proporzionale',\n  'Monospace Serif': 'Serif monospaziato',\n  'Small Caps': 'Maiuscoletto',\n  Reset: 'Reinizializza',\n  'restore all settings to the default values': 'Ripristina i valori predefiniti per tutti i parametri',\n  Done: 'Fatto',\n  'Caption Settings Dialog': 'Finestra di dialogo dei parametri della trascrizione dei sottotitoli',\n  'Beginning of dialog window. Escape will cancel and close the window.':\n    'Inizio della finestra di dialogo. Il tasto Esc annullerà l’operazione e chiuderà la finestra.',\n  'End of dialog window.': 'Fine della finestra di dialogo.',\n  '{1} is loading.': '{1} in fase di caricamento.',\n  'Exit Picture-in-Picture': 'Esci dalla modalità Picture-in-Picture',\n  'Picture-in-Picture': 'Picture-in-Picture',\n  Color: 'Colore',\n  Opacity: 'Opacità',\n  'Text Background': 'Sfondo testo',\n  'Caption Area Background': 'Sfondo area sottotitoli',\n  'Skip forward {1} seconds': 'Avanti {1} secondi',\n  'Skip backward {1} seconds': 'Indietro {1} secondi',\n}\n\nconst DEFAULT_CONFIG = { languages: { it: itLang }, language: 'it' }\n\nconst Default = {}\n\nif (typeof window !== 'undefined') {\n  window.videojs = videojs\n}\n\nclass VideoPlayer extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n    element.classList.add('video-js', 'vjs-theme-bootstrap-italia', 'vjs-fluid', 'vjs-big-play-centered')\n    this._config = this._getConfig(config)\n    this.player = videojs(element, DEFAULT_CONFIG)\n  }\n\n  // Public\n\n  setYouTubeVideo(url) {\n    initYoutubePlugin(videojs)\n    this.player.tech('youtube')\n    this.player.src({ type: 'video/youtube', src: url })\n  }\n\n  // Getters\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Private\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {}),\n    }\n    return config\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nconst players = SelectorEngine.find(SELECTOR_TOGGLE)\nif (players.length > 0) {\n  players.forEach((player) => {\n    VideoPlayer.getOrCreateInstance(player)\n  })\n}\n\nexport default VideoPlayer\n"],"names":[],"mappings":"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"}