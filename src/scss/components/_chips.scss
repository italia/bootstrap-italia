//
// Custom properties

.chip {
  --#{$prefix}chip-background-color: var(--#{$prefix}color-background-muted);
  --#{$prefix}chip-border: $gray-secondary;
  --#{$prefix}chip-background-hover: $gray-light;
  --#{$prefix}chip-label-color: $gray-secondary;
  --#{$prefix}chip-label-font-size: 0.875rem;
  --#{$prefix}chip-border-width: 1px;
  --#{$prefix}chip-border-radius: var(--#{$prefix}radius-rounded);
  --#{$prefix}chip-border-color: var(--#{$prefix}color-border-subtle);
  --#{$prefix}chip-icon-color: var(--#{$prefix}icon-secondary);
  --#{$prefix}chip-padding-x: var(--#{$prefix}spacing-xs);
  --#{$prefix}chip-padding-y: var(--#{$prefix}spacing-3xs);
  --#{$prefix}chip-text-color: var(--#{$prefix}color-text-secondary);
  --#{$prefix}chip-text-line-height: var(--#{$prefix}label-line-height);
  --#{$prefix}chip-text-size: var(--#{$prefix}label-font-size);
  --#{$prefix}chip-text-weight: var(--#{$prefix}font-weight-solid);
  --#{$prefix}chip-link-hover: var(--#{$prefix}color-text-inverse);
}

//
// Component styles

.chip {
  display: inline-flex;
  align-items: center;
  justify-content: space-evenly;
  padding: var(--#{$prefix}chip-padding-y) var(--#{$prefix}chip-padding-x);
  border: var(--#{$prefix}chip-border-width) solid var(--#{$prefix}chip-border-color);
  border-radius: var(--#{$prefix}chip-border-radius);
  background-color: var(--#{$prefix}chip-background-color);
  color: var(--#{$prefix}chip-text-color);
  gap: var(--#{$prefix}spacing-xxs);

  & + & {
    // adjacent sibling selector
    margin-left: var(--#{$prefix}spacing-s);
  }

  &:hover {
    cursor: text;
    color: var(--#{$prefix}chip-text-color);
  }

  // Chip label
  .chip-label {
    margin-bottom: 0;
    font-size: var(--#{$prefix}chip-text-size);
    font-weight: var(--#{$prefix}chip-text-weight);
    line-height: var(--#{$prefix}chip-text-line-height);
    text-decoration: none;
  }

  // Close button
  button {
    padding: 0;
    border: none;
    background: transparent;
    line-height: 1; // Reset default button line-height

    &:hover:not([disabled]) {
      cursor: pointer;
    }

    &:hover[disabled] {
      cursor: not-allowed;
    }

    .icon {
      fill: var(--#{$prefix}chip-icon-color);
      &:hover {
        fill: var(--#{$prefix}icon-primary);
      }
    }
  }

  // left icon

  & > .icon {
    fill: var(--#{$prefix}chip-icon-color);
  }

  // Reset margin for avatar - see _avatar.scss
  .avatar ~ span {
    margin-left: 0;
  }

  // Variant Large
  &-lg {
    --#{$prefix}chip-padding-x: var(--#{$prefix}spacing-s);
    --#{$prefix}chip-text-size: var(--#{$prefix}label-font-size-m);
  }

  // Default background for color variants
  &-primary,
  &-secondary,
  &-success,
  &-danger,
  &-warning {
    --#{$prefix}chip-background-color: transparent;
  }

  // Variant Colors
  &.chip-primary {
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-primary);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-primary);
  }

  &.chip-secondary {
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-secondary);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-secondary);
  }

  &.chip-success {
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-success);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-success);
  }

  &.chip-danger {
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-danger);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-danger);
  }

  &.chip-warning {
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-warning);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-warning);
  }

  // State disabled
  &.chip-disabled {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-disabled);
    --#{$prefix}chip-text-color: var(--#{$prefix}color-text-disabled);

    &:hover {
      cursor: not-allowed;
    }

    button {
      cursor: not-allowed;

      .icon {
        fill: var(--#{$prefix}icon-disabled);
      }
    }

    & > .icon {
      fill: var(--#{$prefix}icon-disabled);
    }

    .avatar {
      img {
        filter: grayscale(100%);
      }
    }
  }
}

// Chip link
// Links inside a chip: use the component-specific hover color so we don't
// override the global link hover color for the whole document.
a.chip:not(.chip-disabled) {
  text-decoration: underline;
}

// Chip link hover state
a.chip:hover:not(.chip-disabled) {
  --#{$prefix}chip-background-color: var(--#{$prefix}color-background-secondary-hover);
  --#{$prefix}chip-border-color: var(--#{$prefix}color-background-secondary-hover);
  --#{$prefix}chip-text-color: var(--#{$prefix}chip-link-hover);

  transition: all var(--#{$prefix}transition-instant) ease-in-out;
  cursor: pointer;

  button .icon,
  & > .icon {
    fill: var(--#{$prefix}icon-inverse);
  }

  &.chip-primary,
  &.chip-secondary,
  &.chip-success,
  &.chip-danger,
  &.chip-warning {
    & > .chip-label {
      color: var(--#{$prefix}color-text-inverse);
    }
  }

  &.chip-primary {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-primary-hover);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-primary-hover);
  }

  &.chip-secondary {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-secondary-hover);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-secondary-hover);
  }

  &.chip-success {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-success-hover);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-success-hover);
  }

  &.chip-danger {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-danger-hover);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-danger-hover);
  }

  &.chip-warning {
    --#{$prefix}chip-background-color: var(--#{$prefix}color-background-warning-hover);
    --#{$prefix}chip-border-color: var(--#{$prefix}color-border-warning-hover);
  }
}
