//
// Component properties

.sidebar-wrapper {
  --#{$prefix}sidebar-padding: var(--#{$prefix}spacing-m);
  --#{$prefix}sidebar-background-color: transparent;
  --#{$prefix}sidebar-heading-font-size: var(--#{$prefix}heading-6-font-size);
  --#{$prefix}sidebar-link-padding-x: var(--#{$prefix}spacing-s);
  --#{$prefix}sidebar-link-padding-y: var(--#{$prefix}spacing-xs);
  --#{$prefix}sidebar-link-sublist-indent: var(--#{$prefix}spacing-m);
  --#{$prefix}sidebar-link-font-size: var(--#{$prefix}label-font-size);
  --#{$prefix}sidebar-link-line-height: var(--#{$prefix}body-line-height);
  --#{$prefix}sidebar-link-active-line-width: 4px;
  --#{$prefix}sidebar-divider-color: var(--#{$prefix}color-border-subtle);
  --#{$prefix}sidebar-link-active-border-color: var(--#{$prefix}color-border-primary);
}

//
// Component styles

.sidebar-wrapper {
  padding: var(--#{$prefix}sidebar-padding) 0;
  background: var(--#{$prefix}sidebar-background-color);

  h3 {
    margin-bottom: var(--#{$prefix}spacing-m);
    padding-right: var(--#{$prefix}spacing-s);
    padding-left: var(--#{$prefix}spacing-s);
    font-size: var(--#{$prefix}sidebar-heading-font-size);
    font-weight: var(--#{$prefix}font-weight-solid);
    text-transform: uppercase;
  }

  .sidebar-linklist-wrapper {
    .link-list-wrapper {

      ul {
        li {
          a {
            width: 100%;
            display: block;
            position: relative;
            padding: var(--#{$prefix}sidebar-link-padding-y) var(--#{$prefix}sidebar-link-padding-x);
            font-size: var(--#{$prefix}sidebar-link-font-size);
            line-height: var(--#{$prefix}sidebar-link-line-height);
            text-transform: var(--#{$prefix}sidebar-text-transform, none); // Default to none if not set
            
            // Active indicator: support both .active class and semantic aria-current
            &.active,
            &[aria-current="page"] {
              &::after {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                content: '';
                display: block;
                width: var(--#{$prefix}sidebar-link-active-line-width);
                background-color: var(--#{$prefix}sidebar-link-active-border-color);
              }
            }
            
            span {
              text-decoration: none;
            }

            &.active span,
            &[aria-current="page"] span {
              text-decoration: underline;
            }

            // Collapsable links
            &[data-bs-toggle="collapse"][aria-expanded="true"] span {
              color: var(--#{$prefix}color-text-primary);
            }
          }
        }

        &.link-sublist {
          padding-left: 0; // Reset padding for sublist from _link-list.scss

          li a {
            padding-left: var(--#{$prefix}sidebar-link-sublist-indent);
            text-transform: none; // No text transform for sublist items
          }
        }
      }
    }

    // Divider between link lists
    &.linklist-secondary:before {
      content: '';
      display: block;
      height: 1px;
      margin: var(--#{$prefix}sidebar-link-padding-y) var(--#{$prefix}sidebar-link-padding-y) var(--#{$prefix}sidebar-link-padding-y) 0;
      background: var(--#{$prefix}sidebar-divider-color);
    }
  }

  &.it-line-left-side,
  &.it-line-right-side {
    border-color: var(--#{$prefix}sidebar-divider-color);
  }

  &.it-line-right-side {
    border-right-width: 1px;
    border-right-style: solid;

    .sidebar-linklist-wrapper {
      .link-list-wrapper {
        ul {
          li {
            a {
              &[data-bs-toggle='collapse'] {
                &.active {
                  border-right: var(--#{$prefix}sidebar-link-active-line-width) var(--#{$prefix}sidebar-link-active-border-color);
                  border-left: none;
                }
              }

              &.active {
                &:after {
                  right: 0;
                  left: auto;
                }
              }
            }
          }
        }
      }
    }
  }

  &.it-line-left-side {
    border-left-width: 1px;
    border-left-style: solid;
  }
}

.sidebar-wrapper.theme-dark {
  --#{$prefix}sidebar-background-color: var(--#{$prefix}color-background-secondary);
  --#{$prefix}sidebar-divider-color: var(--#{$prefix}color-border-subtle);
  --#{$prefix}sidebar-link-active-border-color: var(--#{$prefix}color-border-inverse);

  h3 {
    color: var(--#{$prefix}color-text-inverse);
  }

  .sidebar-linklist-wrapper .link-list-wrapper li a[data-bs-toggle="collapse"][aria-expanded="true"] span {
    color: var(--#{$prefix}color-text-inverse);
  }
}
